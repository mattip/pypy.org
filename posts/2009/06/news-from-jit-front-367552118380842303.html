<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>News from the jit front | PyPy</title>
<link href="../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/styles.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://www.pypy.org/posts/2009/06/news-from-jit-front-367552118380842303.html">
<link rel="icon" href="../../../favicon2.ico" sizes="16x16">
<link rel="icon" href="../../../favicon32x32.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<meta name="author" content="The PyPy Team">
<link rel="prev" href="../05/icooolps-submissions-6705901656116873587.html" title="ICOOOLPS Submissions" type="text/html">
<link rel="next" href="jit-progress-7289127796450840053.html" title="JIT progress" type="text/html">
<meta property="og:site_name" content="PyPy">
<meta property="og:title" content="News from the jit front">
<meta property="og:url" content="https://www.pypy.org/posts/2009/06/news-from-jit-front-367552118380842303.html">
<meta property="og:description" content="As usual, progress is going slower then predicted,
but nevertheless, we're working hard to make some progress.


We recently managed to make our nice GCs cooperate with our JIT. This is
one point from">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2009-06-15T23:59:00Z">
<meta property="article:tag" content="jit">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
             <header id="header"><!-- Adapted from https://www.taniarascia.com/responsive-dropdown-navigation-bar --><section class="navigation"><div class="nav-container">
            <div class="brand">
                <a href="../../../index.html">
                    <image id="toplogo" src="../../../images/pypy-logo.svg" width="75px;" alt="PyPy/"></image></a>
            </div>
            <nav><ul class="nav-list">
<li> 
                <a href="#!">Features</a>
                <ul class="nav-dropdown">
<li> <a href="../../../features.html">What is PyPy?</a> </li>  
                    <li> <a href="../../../compat.html">Compatibility</a> </li>  
                    <li> <a href="../../../performance.html">Performance</a> </li>  
                </ul>
</li>
          <li> <a href="../../../download.html">Download</a> </li>  
          <li> <a href="http://doc.pypy.org">Dev Docs</a> </li>  
            <li> 
                <a href="#!">Blog</a>
                <ul class="nav-dropdown">
<li> <a href="../../../blog">Index</a> </li>  
                    <li> <a href="../../../categories">Tags</a> </li>  
                    <li> <a href="../../../archive.html">Archive by year</a> </li>  
                    <li> <a href="../../../rss.xml">RSS feed</a> </li>  
                    <li> <a href="https://morepypy.blogspot.com/">Old site</a> </li>  
                </ul>
</li>
            <li> 
                <a href="#!">About</a>
                <ul class="nav-dropdown">
<li> <a href="https://twitter.com/pypyproject">Twitter</a> </li>  
                    <li> <a href="https://quodlibet.duckdns.org/irc/pypy/latest.log.html#irc-end">IRC</a> </li>  
                    <li> <a href="../../../people.html">People</a> </li>  
                    <li> <a href="../../../howtohelp.html">How To Help?</a> </li>  
                    <li> <a href="../../../contact.html">Contact</a> </li>  
                </ul>
</li>

                </ul></nav><div class="nav-mobile">
                <a id="nav-toggle" href="#!"> <span></span></a>
            </div>
        </div>
    </section></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><div class="post">
          <header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">News from the jit front</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    The PyPy Team
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2009-06-15T23:59:00Z" itemprop="datePublished" title="2009-06-15 23:59">2009-06-15 23:59</time></a>
            </p>
            <p class="commentline">  14 comments
</p>
                <p class="commentline">                <a href="news-from-jit-front-367552118380842303.html#utterances-thread">Comments</a>


            
        </p>
</div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
      <p>
As usual, progress is going <a href="https://en.wikipedia.org/wiki/Hofstadter's_law">slower then predicted</a>,
but nevertheless, we're working hard to make some progress.
</p>
<p>
We recently managed to make our nice GCs cooperate with our JIT. This is
one point from our detailed plan. As of now, we have a JIT with GCs and
no optimizations. It already speeds up some things, while slowing down
others. The main reason for this is that the JIT generates assembler which is kind
of ok, but it does not do the same level of optimizations gcc would do.
</p>
<p>
So the current status of the JIT is that it can produce assembler out
of executed python code (or any interpreter written in RPython actually),
but the results are not high quality enough since we're missing optimizations.
</p>
<p>
The current plan, as of now, looks as follows:
</p>
<ul>
<li>
Improve the handling of GCs in JIT with inlining of malloc-fast
  paths, that should speed up things by a constant, not too big factor.
</li>
<li>
Write a simplified python interpreter, which will be a base for experiments
  and to make sure that our JIT does correct things with regard to
  optimizations. That would work as mid-level integration test.
</li>
<li>
Think about ways to inline loop-less python functions into their parent's loop.
</li>
<li>
Get rid of frame overhead (by virtualizables)
</li>
<li>
Measure, write benchmarks, publish
</li>
<li>
Profit
</li>
</ul>

Cheers,<br>
fijal
      </div>
      <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/jit.html" rel="tag">jit</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../05/icooolps-submissions-6705901656116873587.html" rel="prev" title="ICOOOLPS Submissions">Previous post</a>
            </li>
            <li class="next">
                <a href="jit-progress-7289127796450840053.html" rel="next" title="JIT progress">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                <div class="comment-level comment-level-1">
      <div class="comment comment-5119993810052132127">
        <div class="comment-header">
          <a name="comment-5119993810052132127"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-06-16 08:03</span>:
        </div>
        <div class="comment-content">
          <p>nice to see the progresses on pypy jit!!</p>
        </div>
      </div>
      <div class="comment comment-3263449096064129706">
        <div class="comment-header">
          <a name="comment-3263449096064129706"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-06-16 09:22</span>:
        </div>
        <div class="comment-content">
          <p>Do you expect to produce jit faster, then Unladen-Swallow's LLVM based ?</p>
        </div>
      </div>
      <div class="comment comment-7643555307102726849">
        <div class="comment-header">
          <a name="comment-7643555307102726849"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-06-16 13:20</span>:
        </div>
        <div class="comment-content">
          <p>Thanks for all the hard work, guys.  Keep it up!</p>
        </div>
      </div>
      <div class="comment comment-6360808917213991360">
        <div class="comment-header">
          <a name="comment-6360808917213991360"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-06-16 13:46</span>:
        </div>
        <div class="comment-content">
          <p>ah, this jit business is so exciting!</p>
        </div>
      </div>
      <div class="comment comment-6816995438778985864">
        <div class="comment-header">
          <a name="comment-6816995438778985864"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-06-16 17:00</span>:
        </div>
        <div class="comment-content">
          <p>I am not really shure how this plan relates to the roadmap that was presented in April.</p>
        </div>
      </div>
      <div class="comment comment-3692321634995120128">
        <div class="comment-header">
          <a name="comment-3692321634995120128"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-06-16 18:15</span>:
        </div>
        <div class="comment-content">
          <p>How this plan relates: it does not.  Fijal's style is to give the current idea of the plans.  Don't believe him too much :-)  This and April's plan need somehow to be added to each other, or something :-)</p>
        </div>
      </div>
      <div class="comment comment-7239598848619851105">
        <div class="comment-header">
          <a name="comment-7239598848619851105"></a>
            <span class="author">Armin Rigo</span> wrote on <span class="date">2009-06-16 18:22</span>:
        </div>
        <div class="comment-content">
          <p>Unladen-Swallow's LLVM JIT is a very different beast: it compiles each Python function as a unit.  You can only get a uniform bit of speedup this way (maybe 2-3x).  By contrast, what we are doing gives a non-uniform speedup: like Psyco, we will probably obtain speedups between 2x and 100x depending on the use case.<br><br>(Of course the plan is to be faster than Psyco in the common case :-)</p>
        </div>
      </div>
      <div class="comment comment-7935841834062618035">
        <div class="comment-header">
          <a name="comment-7935841834062618035"></a>
            <span class="author">Luis</span> wrote on <span class="date">2009-06-17 00:11</span>:
        </div>
        <div class="comment-content">
          <p>Armin: regarding Unladen-Swallow, does this approach prevent coming up later with a tracing jit? Or it could be done on top of it?</p>
        </div>
      </div>
      <div class="comment comment-119278132587546768">
        <div class="comment-header">
          <a name="comment-119278132587546768"></a>
            <span class="author">Nighteh3</span> wrote on <span class="date">2009-06-17 05:45</span>:
        </div>
        <div class="comment-content">
          <p>Sweet !! Good luck guys :)</p>
        </div>
      </div>
      <div class="comment comment-8091909971162021156">
        <div class="comment-header">
          <a name="comment-8091909971162021156"></a>
            <span class="author">Maciej Fijalkowski</span> wrote on <span class="date">2009-06-17 05:55</span>:
        </div>
        <div class="comment-content">
          <p>No no no no, trust me :-)<br><br>The thing is that I'm trying to present "current plan"<br>as live as it can be. Which means we might change<br>our mind completely. But otherwise, the whole blog<br>would be mostly empty and boring...<br><br>Cheers,<br>fijal</p>
        </div>
      </div>
      <div class="comment comment-2732821344096422287">
        <div class="comment-header">
          <a name="comment-2732821344096422287"></a>
            <span class="author">tobami</span> wrote on <span class="date">2009-06-17 11:22</span>:
        </div>
        <div class="comment-content">
          <p>Could you please, elaborate on the second point about a simplified python interpreter?</p>
        </div>
      </div>
      <div class="comment comment-3576595543165694620">
        <div class="comment-header">
          <a name="comment-3576595543165694620"></a>
            <span class="author">tobami</span> wrote on <span class="date">2009-06-17 11:26</span>:
        </div>
        <div class="comment-content">
          <p>Also, wouldn't it be better to refactor the plan as follows?:<br><br>- Improve the handling of GCs in JIT with inlining of malloc-fast paths, that should speed up things by a constant, not too big factor.<br>- Measure, write benchmarks<br>- Write a simplified python interpreter, which will be a base for experiments and to make sure that our JIT does correct things with regard to optimizations. That would work as mid-level integration test.<br>- Think about ways to inline loop-less python functions into their parent's loop.<br>- Measure, publish benchmarks, RELEASE 1.2<br>- Get rid of frame overhead (by virtualizables)<br>- Measure, publish benchmarks<br>- Iterate...</p>
        </div>
      </div>
      <div class="comment comment-7609917601204836534">
        <div class="comment-header">
          <a name="comment-7609917601204836534"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-06-17 14:01</span>:
        </div>
        <div class="comment-content">
          <p>Concerning current ideas vs April's roadmap: I understand that plans change and that's ok of course. But as April's roadmap isn't mentioned at all, I have no idea how the current ideas relate to the previous roadmap (like the current ideas replace the old road map or parts of it / they are additional ideas and the old roadmap is postponed / they are a detailing of (parts of) April's roadmap). Maybe that's obvious to people with better pypy-knowledge than me. I understand Armin's comment that they are additional ideas.<br><br>Keep up the good work!<br><br>Branko</p>
        </div>
      </div>
      <div class="comment comment-1411853283485378791">
        <div class="comment-header">
          <a name="comment-1411853283485378791"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2009-06-18 14:40</span>:
        </div>
        <div class="comment-content">
          <p>What about threading? Will we have a GIL-less interpreter in the end (assuming the GCs support that)?</p>
        </div>
      </div>
         </div>

          </section>
</div>
    <div class="sidebar">
<div>
  <h2>
    The PyPy blogposts
  </h2>
  <div>
    Create a guest post via a PR to the <a href="https://github.com/pypy/pypy.org">source repo</a>
  </div>
</div>
    <div id="global-recent-posts">
    <h2>
      Recent Posts
    </h2>
    <ul class="post-list">
      <li>
        <a href="/posts/2020/12/mac-meets-arm64-940822335619099039.html" class="listtitle">Mac meets Arm64</a>
      </li>
      <li>
        <a href="/posts/2020/11/pypy-733-triple-release-python-37-36-3446596804408262749.html" class="listtitle">PyPy 7.3.3 triple release: python 3.7, 3.6, and 2.7</a>
      </li>
      <li>
        <a href="/posts/2020/09/pypy-732-triple-release-python-27-36-3980901335490872787.html" class="listtitle">PyPy 7.3.2 triple release: python 2.7, 3.6, and 3.7</a>
      </li>
      <li>
        <a href="/posts/2020/08/pypy-is-on-open-collective-5673322428814364737.html" class="listtitle">PyPy is on Open Collective</a>
      </li>
      <li>
        <a href="/posts/2020/08/a-new-chapter-for-pypy-8388322709667328389.html" class="listtitle">A new chapter for PyPy</a>
      </li>
      <li>
        <a href="/posts/2020/04/pypy-731-released-6266451647387657480.html" class="listtitle">PyPy 7.3.1 released</a>
      </li>
      <li>
        <a href="/posts/2020/03/leysin-2020-sprint-report-764567777353955897.html" class="listtitle">Leysin 2020 Sprint Report</a>
      </li>
      <li>
        <a href="/posts/2020/02/pypy-and-cffi-have-moved-to-heptapod-5791595152472747032.html" class="listtitle">PyPy and CFFI have moved to Heptapod</a>
      </li>
      <li>
        <a href="/posts/2020/01/leysin-winter-sprint-2020-feb-28-march-6349761524797409012.html" class="listtitle">Leysin Winter sprint 2020: Feb 29 - March 8th</a>
      </li>
      <li>
        <a href="/posts/2019/12/pypy-730-released-3614026620096963655.html" class="listtitle">PyPy 7.3.0 released</a>
      </li>
    </ul>
  </div>

          <div id="global-archive-list">
          <h2>
            Archives
          </h2>
          <ul class="archive-level archive-level-1">
            <li><a class="reference" href="/2007/">2007</a> (19)
            </li>
            <li><a class="reference" href="/2008/">2008</a> (62)
            </li>
            <li><a class="reference" href="/2009/">2009</a> (38)
            </li>
            <li><a class="reference" href="/2010/">2010</a> (44)
            </li>
            <li><a class="reference" href="/2011/">2011</a> (43)
            </li>
            <li><a class="reference" href="/2012/">2012</a> (44)
            </li>
            <li><a class="reference" href="/2013/">2013</a> (46)
            </li>
            <li><a class="reference" href="/2014/">2014</a> (22)
            </li>
            <li><a class="reference" href="/2015/">2015</a> (20)
            </li>
            <li><a class="reference" href="/2016/">2016</a> (20)
            </li>
            <li><a class="reference" href="/2017/">2017</a> (13)
            </li>
            <li><a class="reference" href="/2018/">2018</a> (12)
            </li>
            <li><a class="reference" href="/2019/">2019</a> (12)
            </li>
            <li><a class="reference" href="/2020/">2020</a> (9)
            </li>
          </ul>
        </div>


          <div id="global-tag-list">
          <h2>
            Tags
          </h2>
          <ul>
            <li><a class="reference" href="/categories/arm.html">arm</a> (1)</li>
            <li><a class="reference" href="/categories/cli.html">cli</a> (1)</li>
            <li><a class="reference" href="/categories/compiler.html">compiler</a> (1)</li>
            <li><a class="reference" href="/categories/cpyext.html">cpyext</a> (3)</li>
            <li><a class="reference" href="/categories/cpython.html">CPython</a> (3)</li>
            <li><a class="reference" href="/categories/ep2008.html">ep2008</a> (1)</li>
            <li><a class="reference" href="/categories/extension-modules.html">extension modules</a> (2)</li>
            <li><a class="reference" href="/categories/graalpython.html">GraalPython</a> (1)</li>
            <li><a class="reference" href="/categories/hpy.html">hpy</a> (1)</li>
            <li><a class="reference" href="/categories/heptapod.html">Heptapod</a> (1)</li>
            <li><a class="reference" href="/categories/jit.html">jit</a> (18)</li>
            <li><a class="reference" href="/categories/jython.html">jython</a> (1)</li>
            <li><a class="reference" href="/categories/kcachegrind.html">kcachegrind</a> (1)</li>
            <li><a class="reference" href="/categories/numpy.html">numpy</a> (24)</li>
            <li><a class="reference" href="/categories/parser.html">parser</a> (1)</li>
            <li><a class="reference" href="/categories/profiling.html">profiling</a> (1)</li>
            <li><a class="reference" href="/categories/pypy.html">pypy</a> (6)</li>
            <li><a class="reference" href="/categories/pypy3.html">pypy3</a> (16)</li>
            <li><a class="reference" href="/categories/pyqt4.html">PyQt4</a> (1)</li>
            <li><a class="reference" href="/categories/release.html">release</a> (47)</li>
            <li><a class="reference" href="/categories/releasecffi.html">releasecffi</a> (3)</li>
            <li><a class="reference" href="/categories/releasepypy.html">releasepypy</a> (1)</li>
            <li><a class="reference" href="/categories/releaserevdb.html">releaserevdb</a> (1)</li>
            <li><a class="reference" href="/categories/releasestm.html">releasestm</a> (1)</li>
            <li><a class="reference" href="/categories/revdb.html">revdb</a> (1)</li>
            <li><a class="reference" href="/categories/roadmap.html">roadmap</a> (1)</li>
            <li><a class="reference" href="/categories/rpyc.html">RPyC</a> (1)</li>
            <li><a class="reference" href="/categories/speed.html">speed</a> (3)</li>
            <li><a class="reference" href="/categories/sprint.html">sprint</a> (3)</li>
            <li><a class="reference" href="/categories/stm.html">stm</a> (14)</li>
            <li><a class="reference" href="/categories/sun.html">sun</a> (1)</li>
            <li><a class="reference" href="/categories/smalltalk.html">Smalltalk</a> (1)</li>
            <li><a class="reference" href="/categories/squeak.html">Squeak</a> (1)</li>
            <li><a class="reference" href="/categories/unicode.html">unicode</a> (1)</li>
            <li><a class="reference" href="/categories/valgrind.html">valgrind</a> (1)</li>
          </ul>
        </div>    </div>
</article></main><footer id="footer"><p>
</p>
<div class="myfooter">
  <div>
    <img src="../../../images/pypy-logo-nav-grey.png" alt="PyPy Logo">
</div>
  <div class="logotext">
     Contents © 2021 <a href="mailto:pypy-dev@pypy.org">The PyPy Team</a>
    Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a> 
  </div>
  <div style="margin-left: auto">
  <a href="rss.xml">RSS feed</a>
</div>

            
        

    </div>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" crossorigin="anonymous"></script><script src="../../../assets/js/styles.js"></script></footer>
</div>
</body>
</html>
