<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Visualization of JITted code | PyPy</title>
<link href="../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/styles.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://www.pypy.org/posts/2011/08/visualization-of-jitted-code-6202490807361942120.html">
<link rel="icon" href="../../../favicon2.ico" sizes="16x16">
<link rel="icon" href="../../../favicon32x32.ico" sizes="32x32">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
<meta name="author" content="The PyPy Team">
<link rel="prev" href="pypy-is-faster-than-c-again-string-6756589731691762127.html" title="PyPy is faster than C, again: string formatting" type="text/html">
<link rel="next" href="pypy-16-kickass-panda-559424594592497545.html" title="PyPy 1.6 - kickass panda" type="text/html">
<meta property="og:site_name" content="PyPy">
<meta property="og:title" content="Visualization of JITted code">
<meta property="og:url" content="https://www.pypy.org/posts/2011/08/visualization-of-jitted-code-6202490807361942120.html">
<meta property="og:description" content="Hello.
We're proud to announce the first public release of the jitviewer. As of now,
jitviewer is a slightly internal tool that helps understanding how your Python
source code is compiled by the PyPy'">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2011-08-12T17:39:00Z">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
             <header id="header"><!-- Adapted from https://www.taniarascia.com/responsive-dropdown-navigation-bar --><section class="navigation"><div class="nav-container">
            <div class="brand">
                <a href="../../../index.html">
                    <image id="toplogo" src="../../../images/pypy-logo.svg" width="75px;" alt="PyPy/"></image></a>
            </div>
            <nav><ul class="nav-list">
<li> 
                <a href="#!">Features</a>
                <ul class="nav-dropdown">
<li> <a href="../../../features.html">What is PyPy?</a> </li>  
                    <li> <a href="../../../compat.html">Compatibility</a> </li>  
                    <li> <a href="../../../performance.html">Performance</a> </li>  
                </ul>
</li>
          <li> <a href="../../../download.html">Download</a> </li>  
          <li> <a href="http://doc.pypy.org">Dev Docs</a> </li>  
            <li> 
                <a href="#!">Blog</a>
                <ul class="nav-dropdown">
<li> <a href="../../../blog">Index</a> </li>  
                    <li> <a href="../../../categories">Tags</a> </li>  
                    <li> <a href="../../../archive.html">Archive by year</a> </li>  
                    <li> <a href="../../../rss.xml">RSS feed</a> </li>  
                    <li> <a href="https://morepypy.blogspot.com/">Old site</a> </li>  
                </ul>
</li>
            <li> 
                <a href="#!">About</a>
                <ul class="nav-dropdown">
<li> <a href="https://twitter.com/pypyproject">Twitter</a> </li>  
                    <li> <a href="https://quodlibet.duckdns.org/irc/pypy/latest.log.html#irc-end">IRC</a> </li>  
                    <li> <a href="../../../people.html">People</a> </li>  
                    <li> <a href="../../../howtohelp.html">How To Help?</a> </li>  
                    <li> <a href="../../../contact.html">Contact</a> </li>  
                </ul>
</li>

                </ul></nav><div class="nav-mobile">
                <a id="nav-toggle" href="#!"> <span></span></a>
            </div>
        </div>
    </section></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><div class="post">
          <header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Visualization of JITted code</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    The PyPy Team
            </span></p>
            <p class="dateline">
            <a href="#" rel="bookmark">
            <time class="published dt-published" datetime="2011-08-12T17:39:00Z" itemprop="datePublished" title="2011-08-12 17:39">2011-08-12 17:39</time></a>
            </p>
            <p class="commentline">  6 comments
</p>
                <p class="commentline">                <a href="visualization-of-jitted-code-6202490807361942120.html#utterances-thread">Comments</a>


            
        </p>
</div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
      <p>Hello.</p>
<p>We're proud to announce the first public release of the jitviewer. As of now,
jitviewer is a slightly internal tool that helps understanding how your Python
source code is compiled by the PyPy's JIT all the way down to machine code.</p>
<p>To install it, you need a very recent version of PyPy
(newer than 9th of August), for example one of the <a class="reference external" href="https://buildbot.pypy.org/nightly/trunk/">nightly builds</a>:</p>
<blockquote>
<ul class="simple">
<li>install <tt class="docutils literal">pip</tt> and <tt class="docutils literal">distribute</tt> either by creating a PyPy <a class="reference external" href="https://pypi.python.org/pypi/virtualenv">virtualenv</a>
or by following the <a class="reference external" href="https://doc.pypy.org/en/latest/getting-started.html#installing-pypy">installation instructions</a>.</li>
<li>make sure to have a <a class="reference external" href="https://bitbucket.org/pypy/pypy">source code checkout</a> of PyPy and put it in your
PYTHONPATH.</li>
<li>
<tt class="docutils literal">pip install jitviewer</tt>.  Note that you need to run the <tt class="docutils literal">pip</tt>
executable which belongs to PyPy, not the globally installed one.</li>
</ul>
</blockquote>
<p>Have a look at the <a class="reference external" href="https://bitbucket.org/pypy/jitviewer/src/24adc3403cd8/README">README</a> for how to start it, or try the <a class="reference external" href="https://wyvern.cs.uni-duesseldorf.de:5000/">online demo</a> if
you just want to play with it.</p>
<p>The jitviewer is a web application written with <tt class="docutils literal">flask</tt> and <tt class="docutils literal">jinja2</tt>.  If
you have experience with web development and you want to help PyPy, don't
hesitate to contact us, there are plenty of things to improve in it :-).</p>
<div class="section" id="what-does-the-jitviewer-really-do">
<h3>What does the jitviewer really do?</h3>
<p>At the top of the page, you will see the list of pieces of code which has been
compiled by the JIT.  You will see entries for both normal loops and for
"entry bridges".  This is not the right place to discuss the difference
between those, but you most probably want to look at loops, because usually
it's where most of the time is spent.</p>
<p>Note that for each loop, you will see the name of the function which contains
the <strong>first</strong> instruction of the loop.  However, thanks to the inlining done
by the JIT, it will contain also the code for other functions.</p>
<p>Once you select a loop, the jitviewer shows how the JIT has compiled the
Python source code into assembler in a hierarchical way. It displays four
levels:</p>
<ul>
<li>
<p class="first">Python source code: only the lines shown in azure have been compiled for
this particular loop, the ones in gray have not.</p>
</li>
<li>
<p class="first">Python bytecode, the one you would get by doing:</p>
<pre class="literal-block">
def f(a, b):
   return a + b

import dis
dis.dis(f)
</pre>
<p>The opcodes are e.g. <tt class="docutils literal">LOAD_FAST</tt>, <tt class="docutils literal">LOAD_GLOBAL</tt> etc.  The opcodes
which are not in bold have been completely optimized aways by the JIT.</p>
</li>
<li>
<p class="first">Intermediate representation of jit code (IR). This is a combination of
operations (like integer addition, reading fields out of structures) and
guards (which check that the assumptions we made are actually true). Guards
are in red.  These operations are "at the same level as C": so, for example,
<tt class="docutils literal">+</tt> takes two unboxed integers which can be stored into the register
of the CPU.</p>
</li>
<li>
<p class="first">Assembler: you can see it by clicking on "Show assembler" in the menu on the
right.</p>
</li>
</ul>
<p>Sometimes you'll find that a guard fails often enough that a new piece of
assembler is required to be compiled. This is an alternative path through the
code and it's called a bridge. You can see bridges in the jitviewer when
there is a link next to a guard. For more information about purpose look up
the <a class="reference external" href="https://doc.pypy.org/en/latest/jit/index.html">jit documentation</a>.</p>
</div>
<div class="section" id="i-m-still-confused">
<h3>I'm still confused</h3>
<p>Jitviewer is not perfect when it comes to explaining what's going on. Feel free
to pop up on IRC or send us a mail to the mailing list, we'll try to explain
and/or improve the situation. Consult the <a class="reference external" href="https://pypy.org/contact.html">contact</a> page for details.</p>
<p>Cheers,<br>
fijal &amp; antocuni</p>
</div>
      </div>
      <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="pypy-is-faster-than-c-again-string-6756589731691762127.html" rel="prev" title="PyPy is faster than C, again: string formatting">Previous post</a>
            </li>
            <li class="next">
                <a href="pypy-16-kickass-panda-559424594592497545.html" rel="next" title="PyPy 1.6 - kickass panda">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                <div class="comment-level comment-level-1">
      <div class="comment comment-5979609594386414939">
        <div class="comment-header">
          <a name="comment-5979609594386414939"></a>
            <span class="author">Paul Smith</span> wrote on <span class="date">2011-08-13 20:47</span>:
        </div>
        <div class="comment-content">
          <p>I'm getting a TemplateNotFound jinja2 exception when I run the jitviewer.py as shown in the README.</p>
        </div>
      </div>
      <div class="comment comment-5955047807596511661">
        <div class="comment-header">
          <a name="comment-5955047807596511661"></a>
            <span class="author">Maciej Fijalkowski</span> wrote on <span class="date">2011-08-13 20:48</span>:
        </div>
        <div class="comment-content">
          <p>I think you have to python setup.py install it in a virtualenv. It might not work from the checkout any more.</p>
        </div>
      </div>
      <div class="comment comment-3251601327291865385">
        <div class="comment-header">
          <a name="comment-3251601327291865385"></a>
            <span class="author">Paul Smith</span> wrote on <span class="date">2011-08-13 21:31</span>:
        </div>
        <div class="comment-content">
          <p>That fixed it, thanks.</p>
        </div>
      </div>
      <div class="comment comment-4250441681166280774">
        <div class="comment-header">
          <a name="comment-4250441681166280774"></a>
            <span class="author">Anonymous</span> wrote on <span class="date">2011-08-14 10:25</span>:
        </div>
        <div class="comment-content">
          <p>Would it be possible to get some screenshots of jitviewer, as the online demo is currently down?</p>
        </div>
      </div>
      <div class="comment comment-5914361362857278156">
        <div class="comment-header">
          <a name="comment-5914361362857278156"></a>
            <span class="author">Garito</span> wrote on <span class="date">2011-08-16 19:23</span>:
        </div>
        <div class="comment-content">
          <p>The demo doesn't work<br><br>Please, could you put it back?<br><br>Thanks a lot!<br><br>I'm developing a programming languaje based on mindmaps and I would like to know if my code works with pypy...</p>
        </div>
      </div>
      <div class="comment comment-2809784003851823899">
        <div class="comment-header">
          <a name="comment-2809784003851823899"></a>
            <span class="author">Unknown</span> wrote on <span class="date">2011-10-02 08:33</span>:
        </div>
        <div class="comment-content">
          <p>jitviewer repository - https://bitbucket.org/pypy/jitviewer</p>
        </div>
      </div>
         </div>

          </section>
</div>
    <div class="sidebar">
<div>
  <h2>
    The PyPy blogposts
  </h2>
  <div>
    Create a guest post via a PR to the <a href="https://github.com/pypy/pypy.org">source repo</a>
  </div>
</div>
    <div id="global-recent-posts">
    <h2>
      Recent Posts
    </h2>
    <ul class="post-list">
      <li>
        <a href="/posts/2020/12/mac-meets-arm64-940822335619099039.html" class="listtitle">Mac meets Arm64</a>
      </li>
      <li>
        <a href="/posts/2020/11/pypy-733-triple-release-python-37-36-3446596804408262749.html" class="listtitle">PyPy 7.3.3 triple release: python 3.7, 3.6, and 2.7</a>
      </li>
      <li>
        <a href="/posts/2020/09/pypy-732-triple-release-python-27-36-3980901335490872787.html" class="listtitle">PyPy 7.3.2 triple release: python 2.7, 3.6, and 3.7</a>
      </li>
      <li>
        <a href="/posts/2020/08/pypy-is-on-open-collective-5673322428814364737.html" class="listtitle">PyPy is on Open Collective</a>
      </li>
      <li>
        <a href="/posts/2020/08/a-new-chapter-for-pypy-8388322709667328389.html" class="listtitle">A new chapter for PyPy</a>
      </li>
      <li>
        <a href="/posts/2020/04/pypy-731-released-6266451647387657480.html" class="listtitle">PyPy 7.3.1 released</a>
      </li>
      <li>
        <a href="/posts/2020/03/leysin-2020-sprint-report-764567777353955897.html" class="listtitle">Leysin 2020 Sprint Report</a>
      </li>
      <li>
        <a href="/posts/2020/02/pypy-and-cffi-have-moved-to-heptapod-5791595152472747032.html" class="listtitle">PyPy and CFFI have moved to Heptapod</a>
      </li>
      <li>
        <a href="/posts/2020/01/leysin-winter-sprint-2020-feb-28-march-6349761524797409012.html" class="listtitle">Leysin Winter sprint 2020: Feb 29 - March 8th</a>
      </li>
      <li>
        <a href="/posts/2019/12/pypy-730-released-3614026620096963655.html" class="listtitle">PyPy 7.3.0 released</a>
      </li>
    </ul>
  </div>

          <div id="global-archive-list">
          <h2>
            Archives
          </h2>
          <ul class="archive-level archive-level-1">
            <li><a class="reference" href="/2007/">2007</a> (19)
            </li>
            <li><a class="reference" href="/2008/">2008</a> (62)
            </li>
            <li><a class="reference" href="/2009/">2009</a> (38)
            </li>
            <li><a class="reference" href="/2010/">2010</a> (44)
            </li>
            <li><a class="reference" href="/2011/">2011</a> (43)
            </li>
            <li><a class="reference" href="/2012/">2012</a> (44)
            </li>
            <li><a class="reference" href="/2013/">2013</a> (46)
            </li>
            <li><a class="reference" href="/2014/">2014</a> (22)
            </li>
            <li><a class="reference" href="/2015/">2015</a> (20)
            </li>
            <li><a class="reference" href="/2016/">2016</a> (20)
            </li>
            <li><a class="reference" href="/2017/">2017</a> (13)
            </li>
            <li><a class="reference" href="/2018/">2018</a> (12)
            </li>
            <li><a class="reference" href="/2019/">2019</a> (12)
            </li>
            <li><a class="reference" href="/2020/">2020</a> (9)
            </li>
          </ul>
        </div>


          <div id="global-tag-list">
          <h2>
            Tags
          </h2>
          <ul>
            <li><a class="reference" href="/categories/arm.html">arm</a> (1)</li>
            <li><a class="reference" href="/categories/cli.html">cli</a> (1)</li>
            <li><a class="reference" href="/categories/compiler.html">compiler</a> (1)</li>
            <li><a class="reference" href="/categories/cpyext.html">cpyext</a> (3)</li>
            <li><a class="reference" href="/categories/cpython.html">CPython</a> (3)</li>
            <li><a class="reference" href="/categories/ep2008.html">ep2008</a> (1)</li>
            <li><a class="reference" href="/categories/extension-modules.html">extension modules</a> (2)</li>
            <li><a class="reference" href="/categories/graalpython.html">GraalPython</a> (1)</li>
            <li><a class="reference" href="/categories/hpy.html">hpy</a> (1)</li>
            <li><a class="reference" href="/categories/heptapod.html">Heptapod</a> (1)</li>
            <li><a class="reference" href="/categories/jit.html">jit</a> (18)</li>
            <li><a class="reference" href="/categories/jython.html">jython</a> (1)</li>
            <li><a class="reference" href="/categories/kcachegrind.html">kcachegrind</a> (1)</li>
            <li><a class="reference" href="/categories/numpy.html">numpy</a> (24)</li>
            <li><a class="reference" href="/categories/parser.html">parser</a> (1)</li>
            <li><a class="reference" href="/categories/profiling.html">profiling</a> (1)</li>
            <li><a class="reference" href="/categories/pypy.html">pypy</a> (6)</li>
            <li><a class="reference" href="/categories/pypy3.html">pypy3</a> (16)</li>
            <li><a class="reference" href="/categories/pyqt4.html">PyQt4</a> (1)</li>
            <li><a class="reference" href="/categories/release.html">release</a> (47)</li>
            <li><a class="reference" href="/categories/releasecffi.html">releasecffi</a> (3)</li>
            <li><a class="reference" href="/categories/releasepypy.html">releasepypy</a> (1)</li>
            <li><a class="reference" href="/categories/releaserevdb.html">releaserevdb</a> (1)</li>
            <li><a class="reference" href="/categories/releasestm.html">releasestm</a> (1)</li>
            <li><a class="reference" href="/categories/revdb.html">revdb</a> (1)</li>
            <li><a class="reference" href="/categories/roadmap.html">roadmap</a> (1)</li>
            <li><a class="reference" href="/categories/rpyc.html">RPyC</a> (1)</li>
            <li><a class="reference" href="/categories/speed.html">speed</a> (3)</li>
            <li><a class="reference" href="/categories/sprint.html">sprint</a> (3)</li>
            <li><a class="reference" href="/categories/stm.html">stm</a> (14)</li>
            <li><a class="reference" href="/categories/sun.html">sun</a> (1)</li>
            <li><a class="reference" href="/categories/smalltalk.html">Smalltalk</a> (1)</li>
            <li><a class="reference" href="/categories/squeak.html">Squeak</a> (1)</li>
            <li><a class="reference" href="/categories/unicode.html">unicode</a> (1)</li>
            <li><a class="reference" href="/categories/valgrind.html">valgrind</a> (1)</li>
          </ul>
        </div>    </div>
</article></main><footer id="footer"><p>
</p>
<div class="myfooter">
  <div>
    <img src="../../../images/pypy-logo-nav-grey.png" alt="PyPy Logo">
</div>
  <div class="logotext">
     Contents © 2021 <a href="mailto:pypy-dev@pypy.org">The PyPy Team</a>
    Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a> 
  </div>
  <div style="margin-left: auto">
  <a href="rss.xml">RSS feed</a>
</div>

            
        

    </div>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" crossorigin="anonymous"></script><script src="../../../assets/js/styles.js"></script></footer>
</div>
</body>
</html>
